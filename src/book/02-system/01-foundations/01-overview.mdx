---
section: System
chapter: Foundations
title: Overview
description: Introduction to the NUbots codebase and high-level architecture.
slug: /system/foundations/overview
---

The NUbots repository is the main codebase that runs on the robots. Its purpose is to control the robot during RoboCup matches. The NUbots codebase, along with all other NUbots code, is open source and can be [found on GitHub](https://github.com/NUbots/NUbots/). The primary language in the NUbots codebase is C++.

The main parts of the NUbots codebase are behaviour, motion, vision, and localisation. Behaviours include strategy, planning and skills. Motion includes kicking, getting up, and walking. Vision includes ball, goal and field detectors. Localisation determines where the robot, ball and the field are in the world through odometry.

At the top level, the robot will use strategy to decide what to do based on the game state. This includes unique behaviour for penalty shoot-outs.

The next level down is planning. This includes planning the path to walk along to get to the ball facing the right goal.
Below planning is skills. Skills include kicking, walking, getting up, and looking at objects.

Next is motions. Motions include how the robot moves its feet to walk, and what movements it does to kick or get up.

After motions is hardware IO. The hardware will output the commands and input the information from the world. This will then go through a sensor filter so that the robot can interpret the information. This information then influences strategy.

All these modules are connected using NUClear which is a message passing software architecture. More can be found on NUClear [here](https://nuclear.readthedocs.io/en/latest/).

![Flow of the NUbots codebase](./images/software-overview.svg)

## Roles

Roles in the main codebase are the building blocks for creating a binary to run on a robot. A role file lists all the modules to be used in that binary. If a module is not included in the role file, that module will not run. All roles can be found in the [roles folder](https://github.com/NUbots/NUbots/tree/master/roles) in the first level of the repository and have the extension `.role`. For specifics about the NUClear roles system, see the [NUClear page](/system/foundations/nuclear#nuclear-roles).

When adding modules to the list in a role, use the syntax `namespace::module_name`. For example, if you want to include the [`SensorFilter` module](https://github.com/NUbots/NUbots/tree/master/module/input/SensorFilter), then check the namespace in [`SensorFilter.hpp`](https://github.com/NUbots/NUbots/blob/master/module/input/SensorFilter/src/SensorFilter.hpp). The namespace is `namespace module::input`, so we have `module::input::SensorFilter`. However, all modules have `module::` so we drop this part of the namespace. The line in the role is therefore `input::SensorFilter`.

The following is a table of roles that exist in the NUbots codebase and possible use cases for them.

| Role Name            | What it contains                                                                                      | Usage                                                                                                                                                                                                                                                                   |
| -------------------- | ----------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `balllocalisation`   | Real robot sensors, Visual Mesh, ball detector and ball localisation                                  | Used to test and tune how well the robot detects balls on a field.                                                                                                                                                                                                      |
| `cameratest`         | Real robot sensors and camera                                                                         | Used to see if the cameras are working and often used for [calibrating the cameras](/guides/main/camera-calibration).                                                                                                                                                   |
| `filter_playback`    | Filter sensor data, data playback and NUsight                                                         | Use for playing back raw sensor data and viewing the filtered data in NUsight.                                                                                                                                                                                          |
| `firmwareinstaller`  | Firmware installer                                                                                    | Used to install firmware to the robot.                                                                                                                                                                                                                                  |
| `gamecontrollertest` | Real robot sensors, game controller and NUsight                                                       | Used for testing the connection between the robot and [GameController](https://github.com/RoboCup-Humanoid-TC/GameController).                                                                                                                                          |
| `gazebo`             | Gazebo robot sensors, motion modules and NUsight                                                      | Used to run motions with a robot in [Gazebo](http://gazebosim.org/).                                                                                                                                                                                                    |
| `headbehtest`        | Real robot sensors and camera, vision modules, script modules, head controller and behaviour          | Used to test head behaviour, particularly with balls and goals.                                                                                                                                                                                              |
| `keyboardwalk`       | Real robot sensors, motions, keyboard walk and NUsight                                                | Used for demonstrating the robot manually with a keyboard, particularly in a setting without a field.                                                                                                                                                                   |
| `keyboardwalkfake`   | As above but with a basic simulated robot (not webots)                                                | Used for testing the code for run-time issues without a real robot. Used to demonstrate basic functionality of the robot. Part of the [Getting Started](/guides/main/getting-started) example since it does not require a real robot. |
| `localisationtest`   | Localisation, localisation simulator and NUsight                                                      | Used to test localisation in a simulated environment.                                                                                                                                                                                                                   |
| `lookatball`         | Real robot sensors, vision and motions                                                                | Testing the robot's ability to track a ball with head behaviour.                                                                                                                                        |
| `lookatgoal`         | Real robot sensors, localisation, vision and motions                                                  | Used to test head behaviour with localisation, which should make the robot look at the goals.                                                                                                                                                                                  |
| `natnet`             | Real robot sensors, NUsight and NatNet                                                                | Used to get motion capture data from a [Motive](https://optitrack.com/software/motive/) motion capture system.                                                                                                                                                          |
| `nusighttest`        | NUsight                                                                                               | Testing connection with NUsight. This role doesn't run anything that can send data.                                                                                                                                                                                                 |
| `playback`           | Data playback and NUsight                                                                             | Used for playing back data to view in NUsight without triggering any other processes in the system.                                                                                                                                                                     |
| `ps3walk`            | Real robot sensors, motion modules and PS3 walk                                                       | Used for demonstrating the robot manually with a PS3 controller, particularly in a setting without a field.                                                                                                                                                             |
| `robocup`            | Real robot sensors, vision, localisation, motions, behaviour, game controller and NUsight             | Used when playing RoboCup games.                                                                                                                                                                                                                                        |
| `scriptrunner`       | Real robot sensors, the script engine and [script runner](/system/subsystems/behaviour#script-runner) | Used to run scripts, such as the `Stand.yaml` script which is useful to run before doing anything with the robot.                                                                                                                                                       |
| `scripttuner`        | Real robot sensors, the script engine and [script tuner](/system/subsystems/behaviour#script-tuner)   | Used to tune/modify/create [scripts](/system/subsystems/motion#script-engine).                                                                                                                                                                                          |
| `scripttunerwebots`  | As above with webots instead of the real robot sensors                                                | As above but for use in the webots simulator.                                                                                                                                                                                                                           |
| `sensortest`         | Real robot sensors and NUsight                                                                        | Used to view the robot's position and orientiation in NUsight, often to test odometry. Can also be used to check for broken servos without the robot moving, because servo errors and warnings will be printed to the terminal.                                         |
| `visualmesh_fake`    | Fake camera and vision modules                                                                        | Used to test the vision system, such as detection of balls and goals, in a simulated environment.                                                                                                                                                                       |
| `visualmesh`         | Real robot sensors and camera with vision modules                                                     | Used to test the vision system on a real robot.                                                                                                                                                                                                                         |
| `webots_keyboard`    | `keyboardwalk` but with Webots instead of real robot sensors                                          | Used for easily testing motions in Webots.                                                                                                                                                                                                                              |
| `webots`             | Webots connection module                                                                              | Used for testing the connection between the robot code and Webots.                                                                                                                                                                                                      |
| `webotsrobocup`      | Identical to `robocup` but with webots instead of real robot sensors                                  | Used to play RoboCup games in the Webots simulator.                                                                                                                                                                                                                     |

In most cases, `platform::darwin::HardwareIO` and `platform::Webots` can be used interchangably depending on if you are running on the real robot or the simulated robot in Webots. In some cases `platform::darwin::HardwareSimulator` can also be used, but this simulated robot is very basic and does not consider gravity - this may be useful if you want to see a motion run on the robot without the robot falling down.
